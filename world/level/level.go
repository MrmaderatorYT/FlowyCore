// Йоу, чат! Сьогодні ми розберемо як працює система чанків в нашому майнкрафт сервері!
// Чанк - це кубічна область світу розміром 16x16x16 блоків.
// Саме чанки використовуються для розбиття світу на менші частини,
// щоб можна було ефективно завантажувати та вивантажувати їх.

package level

// ChunkPos - позиція чанка в світі
// X та Z - координати чанка (кожен чанк 16x16 блоків)
// Наприклад, ChunkPos{1, 1} відповідає блокам з координатами x=16..31, z=16..31
type ChunkPos struct {
	X, Z int32 // Координати чанка (не блока!)
}

// Chunk - структура, що представляє один чанк світу
// Містить всі блоки, біоми, висоти та інші дані для області 16x16x16
type Chunk struct {
	Sections   [16]Section // Секції чанка (кожна 16x16x16 блоків)
	Biomes     []int32     // Біоми для кожного блока
	HeightMap  HeightMap   // Карта висот для різних цілей
	BlockLight []byte      // Освітлення від блоків
	SkyLight   []byte      // Освітлення від сонця
	Modified   bool        // Чи був чанк змінений
}

// Section - секція чанка розміром 16x16x16 блоків
// Чанк розділений на секції для оптимізації пам'яті
type Section struct {
	BlockCount int16    // Кількість не-повітряних блоків
	Blocks     []uint16 // ID блоків (12 біт на блок)
	BlockLight []byte   // Освітлення від блоків
	SkyLight   []byte   // Освітлення від сонця
}

// HeightMap містить різні карти висот для чанка
// Використовується для різних цілей: колізії, спавн мобів, тощо
type HeightMap struct {
	MotionBlocking         []int32 // Висота для колізій
	WorldSurface           []int32 // Висота поверхні світу
	MotionBlockingNoLeaves []int32 // Висота без урахування листя
	OceanFloor             []int32 // Висота дна океану
}
